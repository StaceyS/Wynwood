!function(e,t){"use strict";var i={};i.init=function(){this.$event_categories=t(document.getElementById("event-categories")),this.$show_hidden_categories=t(document.getElementById("show_hidden_categories")),this.init_categories()},i.init_categories=function(){var e=this.$event_categories.data("more-text"),i=parseInt(this.$event_categories.data("shown-items"),10),n=this.$event_categories.find("> ul > li"),s=n.find("> ul");s.length?n.each(function(){var i=t(this),n=i.find("ul");if(n.length){var s=n.find("li").length;i.prepend('<span class="tribe-toggle"><span>'+s+" "+e+"</span></span>")}}):this.$event_categories.find(".tribe-categories-with-children").removeClass("tribe-categories-with-children");var a=n.slice(i);a=a.filter(this.filter_out_selected_categories),a.length&&(a.addClass("hidden_category"),this.$show_hidden_categories.closest("div").removeClass("tribe-hide")),s.filter(this.filter_out_selected_categories).addClass("tribe-hide"),s.not(".tribe-hide").closest("li").addClass("tribe-expanded"),this.$event_categories.removeClass("tribe-hide"),t(document).on("click","#event-categories .tribe-toggle",function(){var e=t(this),i=e.closest("li");i.toggleClass("tribe-expanded")})},i.filter_out_selected_categories=function(){return!t(this).find("input:checked").length},t(function(){t(".my-events").addClass("enhanced"),i.init();var n=t(".table-menu"),s=t("#twentyfourteen-style-css").length;s&&t("body").addClass("tribe-2014"),t("#my-events-display-headers th").each(function(e){var i=t(this),s=i.attr("id"),a=i.attr("class");if(s||(s="col-"+e,i.attr("id",s)),t("#tribe-community-events tbody tr").each(function(){var i=t(this).find("th, td").eq(e);i.attr("headers",s),a&&i.addClass(a)}),!i.is(".persist")){var d=t('<li><input type="checkbox" name="toggle-cols" id="toggle-col-'+e+'" value="'+s+'" /> <label for="toggle-col-'+e+'">'+i.text()+"</label></li>");n.find("ul").append(d),d.find("input").change(function(){var e=t(this),i=e.val(),n=t("#"+i+", [headers="+i+"]");e.is(":checked")?n.show():n.hide()}).bind("updateCheck",function(){"table-cell"===i.css("display")?t(this).attr("checked",!0):t(this).attr("checked",!1)}).trigger("updateCheck")}}),t(e).bind("orientationchange resize",function(){n.find("input").trigger("updateCheck")});var a=t(".table-menu-btn");a.click(function(){return n.toggleClass("table-menu-hidden"),!1}),t(document).click(function(e){t(e.target).is(n)||t(e.target).is(n.find("*"))||n.addClass("table-menu-hidden")}),t("#show_hidden_categories").click(function(){return t(".hidden_category").removeClass("hidden_category"),t("#show_hidden_categories").hide(),!1})})}(window,jQuery);